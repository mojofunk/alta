#! /usr/bin/env python
# encoding: utf-8
# Tim Mayberry, 2008


def init():
    pass


def configure(conf):
    print "configure mojo-core"


def build(bld):

    uselibs = ['GMODULE-2.0', 'BOOST_FILESYSTEM', 'BOOST_SYSTEM']
    use_local_shared = [
        'GLEAM',
        'MOJO_CORE_SHARED',
        'MOJO_ARCHIVE_SHARED',
        'MOJO_AUDIO_DRIVER_SHARED',
        'MOJO_AUDIO_EFFECT_SHARED',
        'MOJO_AUDIO_FILE_SHARED']

    use_local_static = [
        'GLEAM',
        'MOJO_CORE_STATIC',
        'MOJO_ARCHIVE_STATIC',
        'MOJO_AUDIO_DRIVER_STATIC',
        'MOJO_AUDIO_EFFECT_STATIC',
        'MOJO_AUDIO_FILE_STATIC']

    if bld.env.ENABLE_AMALGAMATION:
        source = 'mojo-application.cpp'
        defines = 'MOJO_APPLICATION_AMALGAMATED'
    else:
        source = bld.path.ant_glob(
            '**/*.cpp',
            excl='mojo-application.cpp')
        defines = ''

    if bld.env.ENABLE_SHARED:
        bld.shlib(includes='.',
                  export_includes='.',
                  source=source,
                  uselib=uselibs,
                  use=use_local_shared,
                  defines=defines,
                  target='mojo-application',
                  name='MOJO_APPLICATION_SHARED')

    if bld.env.ENABLE_STATIC:
        bld.stlib(includes='.',
                  export_includes='.',
                  source=source,
                  uselib=uselibs,
                  use=use_local_static,
                  defines=defines,
                  target='mojo-application',
                  name='MOJO_APPLICATION_STATIC')
