# vim: tabstop=4 expandtab shiftwidth=4

import tools.pkgconfig as pkgconfig

Import ('env')

mojo_deps = \
{
#    'glib-2.0'      : '2.10.1',
    'gmodule-2.0'   : '2.10.1'
#    'gthread-2.0'   : '2.10.1',
#    'glibmm-2.4'    : '2.8.1'
}

mojo_env = env.Clone()

mojo_env.Append(LIBS = ['boost_filesystem', 'gleam' ] )

pkgconfig.ParseDependencies ( mojo_env, mojo_deps )

mojo_typesystem_files = Split("""
typesystem/type_system.cpp
""")

mojo_utils_files = Split("""
utils/file_utils.cpp
utils/glib_library.cpp
utils/library.cpp
utils/search_path.cpp
utils/resource.cpp
""")

mojo_objects_files = Split("""
objects/audio_clip.cpp
objects/audio_event.cpp
objects/audio_region.cpp
objects/audio_region_event.cpp
objects/audio_sequence.cpp
objects/audio_track.cpp
objects/event.cpp
objects/midi_track.cpp
objects/project.cpp
objects/track.cpp
""")

mojo_source_files = Split("""
app.cpp
archive.cpp
archive_module.cpp
audio_driver_module.cpp
audio_effect.cpp
audio_effect_info.cpp
audio_effect_module.cpp
audio_file.cpp
audio_file_format.cpp
audio_file_module.cpp
directory_names.cpp
filesystem_paths.cpp
graph.cpp
module.cpp
module_utils.cpp
project_directory.cpp
register_types.cpp
sample_block.cpp
type_names.cpp
""")

mojo_source_files += mojo_typesystem_files
mojo_source_files += mojo_utils_files
mojo_source_files += mojo_objects_files

libmojo = mojo_env.SharedLibrary ( 'mojo', mojo_source_files )

Default (libmojo)

if env['BUILD_TESTS']:
        SConscript  ( 'tests/SConscript' )
