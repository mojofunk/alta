# -*- python -*-

import os
import os.path
import glob

Import('env')

if env['DEBUG']:
	liblogx_source_files=Split("""
	liblogx/file_identifier.cpp
	liblogx/function_identifier.cpp
	liblogx/glib_handler.cpp
	liblogx/glib_handler_map.cpp
	liblogx/line_identifier.cpp
	liblogx/pretty_formatter.cpp
	liblogx/thread_identifier.cpp
	""")

libgleam_source_files = Split("""
libgleam/dispatcher.cpp
libgleam/file_utils.cpp
libgleam/filesystem_paths.cpp
libgleam/log_domain.cpp
libgleam/manual_dispatcher.cpp
libgleam/periodic_signal.cpp
libgleam/periodic_signals.cpp
libgleam/search_path.cpp
libgleam/semaphore.cpp
libgleam/terminate_process.cpp
libgleam/thread_debug.cpp
libgleam/thread_map.cpp
""")

libgleam_posix_source_files = Split("""
libgleam/posix_signals.cpp
""")

if env['PLATFORM'] == 'posix':
	libgleam_source_files += libgleam_posix_source_files

libbooty_source_files = Split("""
libbooty/file_utils.cpp
""")

libmojo_source_files = Split("""
libmojo/dir_names.cpp
libmojo/file_extensions.cpp
libmojo/file_utils.cpp
libmojo/log_domain.cpp
libmojo/paths.cpp
libmojo/paths_system.cpp
libmojo/paths_user.cpp
libmojo/project.cpp
libmojo/project_dir.cpp
""")

gmojo_source_files = Split("""
ui/application.cpp
ui/log_domain.cpp
ui/project_view.cpp
ui/thread_names.cpp
ui/main.cpp
ui/signal_handler.cpp
ui/window_title.cpp
""")

all_source_files = libgleam_source_files + \
libbooty_source_files + \
libmojo_source_files + \
gmojo_source_files

if env['DEBUG']:
	all_source_files += liblogx_source_files


gmojo = env.Program( env['VERSIONED_NAME'], all_source_files)

Default(gmojo)

env.Install(env['BINDIR'], gmojo)

