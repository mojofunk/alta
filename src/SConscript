# -*- python -*-

import os
import os.path
import glob

Import('env')

if env['DEBUG']:
	logx_source_files=Split("""
	logx/file_identifier.cpp
	logx/function_identifier.cpp
	logx/glib_handler.cpp
	logx/glib_handler_map.cpp
	logx/line_identifier.cpp
	logx/pretty_formatter.cpp
	logx/thread_identifier.cpp
	""")

libgleam_source_files = Split("""
libgleam/dispatcher.cpp
libgleam/file_utils.cpp
libgleam/filesystem_paths.cpp
libgleam/log_domain.cpp
libgleam/manual_dispatcher.cpp
libgleam/periodic_signal.cpp
libgleam/periodic_signals.cpp
libgleam/search_path.cpp
libgleam/semaphore.cpp
libgleam/terminate_process.cpp
libgleam/thread_debug.cpp
libgleam/thread_map.cpp
""")

libgleam_posix_source_files = Split("""
libgleam/posix_signals.cpp
""")

if env['PLATFORM'] == 'posix':
	libgleam_source_files += libgleam_posix_source_files

booty_source_files = Split("""
booty/file_utils.cpp
""")

mojo_source_files = Split("""
mojo/audio_track.cpp
mojo/directory_names.cpp
mojo/paths.cpp
mojo/paths_system.cpp
mojo/paths_user.cpp
mojo/project.cpp
mojo/project_directory.cpp
mojo/mojo_project_format.cpp
""")

mojo_debug_files=Split("""
mojo/debug/log_domain.cpp
""")

gmojo_source_files = Split("""
ui/application.cpp
ui/application_action_group.cpp
ui/application_actions.cpp
ui/edit_canvas.cpp
ui/edit_window.cpp
ui/edit_window_menu_action_group.cpp
ui/edit_window_menu_ui_definition.cpp
ui/project_action_group.cpp
ui/project_actions.cpp
ui/project_view.cpp
ui/main.cpp
ui/signal_handler.cpp
ui/window_title.cpp
""")

gmojo_debug_files=Split("""
ui/debug/log_domain.cpp
ui/debug/thread_names.cpp
""")

all_source_files = libgleam_source_files + \
booty_source_files + \
mojo_source_files + \
gmojo_source_files

if env['DEBUG']:
	all_source_files += logx_source_files
	all_source_files += mojo_debug_files
	all_source_files += gmojo_debug_files

gmojo = env.Program( env['VERSIONED_NAME'], all_source_files)

Default(gmojo)

env.Install(env['BINDIR'], gmojo)
